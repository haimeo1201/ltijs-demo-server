(this["webpackJsonpltijs-demo-grade"]=this["webpackJsonpltijs-demo-grade"]||[]).push([[0],{34:function(e,t,a){},43:function(e,t,a){e.exports=a(54)},48:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=(a(48),a(5)),s=a.n(o),u=a(12),i=a(6),m=(a(34),a(21)),d=a(37),b=a.n(d);function h(){var e=Object(n.useState)("C++"),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),d=o[0],h=o[1],p=Object(n.useState)(""),v=Object(i.a)(p,2),E=v[0],g=v[1],f=function(){var e=new URLSearchParams(window.location.search).get("ltik");if(!e)throw new Error("Missing LTI key.");return e},j=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(""),e.prev=2,e.next=5,m.a.post("/deeplink",{credentials:"include",json:{language:a,problem:d},headers:{Authorization:"Bearer "+f()}});case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("Error: ".concat(n.status," ").concat(n.statusText));case 8:return e.next=10,n.text();case 10:r=e.sent,b()("body").append(r),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),g("Failed to submit: ".concat(e.t0.message,". Please re-enter the problem ID.")),console.error("Error:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"Submit a Problem"),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"language"},"Language:"),r.a.createElement("select",{id:"language",value:a,onChange:function(e){return c(e.target.value)}},r.a.createElement("option",{value:"C++"},"C++"),r.a.createElement("option",{value:"Java"},"Java"),r.a.createElement("option",{value:"Pascal"},"Pascal"),r.a.createElement("option",{value:"Python3"},"Python3"),r.a.createElement("option",{value:"Python2"},"Python2"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"problem"},"Problem:"),r.a.createElement("input",{id:"problem",type:"text",value:d,onChange:function(e){return h(e.target.value)},required:!0})),r.a.createElement("button",{type:"submit"},"Submit")),E&&r.a.createElement("div",{className:"error-message"},E)," ")}function p(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),d=o[0],b=o[1],h=Object(n.useState)(!1),p=Object(i.a)(h,2),v=p[0],E=p[1],g=Object(n.useState)([]),f=Object(i.a)(g,2),j=f[0],w=f[1],O=Object(n.useState)(!1),S=Object(i.a)(O,2),k=S[0],x=S[1],y=Object(n.useState)(null),C=Object(i.a)(y,2),P=C[0],N=C[1],T=Object(n.useState)(null),L=Object(i.a)(T,2),B=L[0],I=L[1],J=function(){var e=new URLSearchParams(window.location.search).get("ltik");if(!e)throw new Error("Missing LTI key.");return e},R=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),E(!0),b(""),w([]),x(!1),N(null),I(null),e.prev=7,e.next=10,m.a.post("/grade",{credentials:"include",json:{code:a},headers:{Authorization:"Bearer "+J()},timeout:5e3});case 10:return n=e.sent,e.next=13,n.json();case 13:"CE"===(r=e.sent).result?(x(!0),b("Compilation Error: "+r.judge+" submission_id: "+r.id),N(0)):(w(r.judge.tests),b("Code submitted successfully!"),N(r.score),I(r.id)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(7),console.log("Error:",e.t0),b("You have to wait 1 minute and 30 seconds before submitting another code"),x(!0);case 22:return e.prev=22,E(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[7,17,22,25]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"code-submit-container"},r.a.createElement("h1",null,"Submit Your Code"),r.a.createElement("form",{onSubmit:R},r.a.createElement("textarea",{value:a,onChange:function(e){return c(e.target.value)},placeholder:"Write your code here...",rows:"10",className:"code-textarea"}),!v&&!j.length&&!k&&r.a.createElement("button",{type:"submit",className:"submit-button"},"Submit"),!v&&(k||j.length>0)&&r.a.createElement("button",{onClick:function(){c(""),b(""),w([]),x(!1),N(null),I(null)},className:"resubmit-button"},"Resubmit")),v&&r.a.createElement("div",{className:"loading"},"Loading..."),d&&r.a.createElement("div",{className:"message"},d),null!==P&&r.a.createElement("div",{className:"score"},"Total Score: ",P,", submission_id: ",B),!k&&j.length>0&&r.a.createElement("div",{className:"results"},j.map((function(e,t){return r.a.createElement("div",{key:t,className:"test-result"},r.a.createElement("h3",null,"Test Case ",t+1),r.a.createElement("p",null,"Verdict: ",e.verdict),r.a.createElement("p",null,"Running Time: ",e.runningTime," seconds"),r.a.createElement("p",null,"Message: ",e.message))}))))}var v=a(39),E=a(2);function g(){return r.a.createElement(v.a,null,r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/"},r.a.createElement(p,null)),r.a.createElement(E.a,{path:"/deeplink"},r.a.createElement(h,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=a(40);l.a.render(r.a.createElement(f.a,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.99284285.chunk.js.map